{
  "dxt_version": "0.1.0",
  "name": "aashari__mcp-server-atlassian-bitbucket",
  "display_name": "mcp-server-atlassian-bitbucket",
  "version": "1.0.0",
  "description": "Node.js/TypeScript MCP server for Atlassian Bitbucket. Enables AI systems (LLMs) to interact with workspaces, repositories, and pull requests via tools (list, get, comment, search). Connects AI directly to version control workflows through the standard MCP interface.",
  "author": {
    "name": "aashari"
  },
  "server": {
    "mcp_config": {
      "command": "npx",
      "args": [
        "-y",
        "@aashari/mcp-server-atlassian-bitbucket"
      ],
      "env": {
        "ATLASSIAN_BITBUCKET_USERNAME": "${user_config.bitbucket_username}",
        "ATLASSIAN_BITBUCKET_APP_PASSWORD": "${user_config.bitbucket_app_password}",
        "ATLASSIAN_USER_EMAIL": "${user_config.atlassian_user_email}",
        "ATLASSIAN_API_TOKEN": "${user_config.atlassian_api_token}",
        "BITBUCKET_DEFAULT_WORKSPACE": "${user_config.default_workspace}"
      }
    }
  },
  "tools": [],
  "prompts": [],
  "keywords": [],
  "user_config": {
    "bitbucket_username": {
      "type": "string",
      "title": "Bitbucket Username",
      "description": "Your Bitbucket username. Required if using a Bitbucket App Password for authentication.",
      "required": false,
      "sensitive": false
    },
    "bitbucket_app_password": {
      "type": "string",
      "title": "Bitbucket App Password (Recommended)",
      "description": "Your Bitbucket App Password. This is the recommended authentication method. Generate one from https://bitbucket.org/account/settings/app-passwords/",
      "required": false,
      "sensitive": true
    },
    "atlassian_user_email": {
      "type": "string",
      "title": "Atlassian User Email",
      "description": "Your Atlassian user email. Required if using an Atlassian API Token for authentication.",
      "required": false,
      "sensitive": false
    },
    "atlassian_api_token": {
      "type": "string",
      "title": "Atlassian API Token",
      "description": "Your Atlassian API Token. Alternative authentication method. Generate one from https://id.atlassian.com/manage-profile/security/api-tokens",
      "required": false,
      "sensitive": true
    },
    "default_workspace": {
      "type": "string",
      "title": "Default Workspace",
      "description": "Optional. The slug of your default Bitbucket workspace to use when one is not explicitly provided in a command.",
      "required": false,
      "sensitive": false
    }
  },
  "readme": "# Atlassian Bitbucket MCP Server\n\nA Node.js/TypeScript Model Context Protocol (MCP) server for Atlassian Bitbucket Cloud. Enables AI systems (e.g., LLMs like Claude or Cursor AI) to securely interact with your repositories, pull requests, workspaces, and code in real time.\n\n[![NPM Version](https://img.shields.io/npm/v/@aashari/mcp-server-atlassian-bitbucket)](https://www.npmjs.com/package/@aashari/mcp-server-atlassian-bitbucket)\n[![Build Status](https://img.shields.io/github/workflow/status/aashari/mcp-server-atlassian-bitbucket/CI)](https://github.com/aashari/mcp-server-atlassian-bitbucket/actions)\n\n## Why Use This Server?\n\n- **Minimal Input, Maximum Output**: Simple identifiers provide comprehensive details without requiring extra flags.\n- **Rich Code Visualization**: Get detailed insights into code changes with file statistics, diff views, and smart context.\n- **Secure Local Authentication**: Run locally with your credentials, never storing tokens on remote servers.\n- **Intuitive Markdown Responses**: Well-structured, consistent Markdown formatting for all outputs.\n- **Full Bitbucket Integration**: Access workspaces, repositories, pull requests, comments, code search, and more.\n\n## What is MCP?\n\nModel Context Protocol (MCP) is an open standard for securely connecting AI systems to external tools and data sources. This server implements MCP for Bitbucket Cloud, enabling AI assistants to interact with your Bitbucket data programmatically.\n\n## Prerequisites\n\n- **Node.js** (>=18.x): [Download](https://nodejs.org/)\n- **Bitbucket Cloud Account**\n\n## Setup\n\n### Step 1: Authenticate\n\nChoose one of the following authentication methods:\n\n#### Option A: Bitbucket App Password (Recommended)\n\nGenerate one from [Bitbucket App Passwords](https://bitbucket.org/account/settings/app-passwords/). Minimum permissions:\n- Workspaces: Read\n- Repositories: Read\n- Pull Requests: Read\n\nYou can also set `BITBUCKET_DEFAULT_WORKSPACE` to specify a default workspace when not explicitly provided.\n\n#### Option B: Atlassian API Token\n\nGenerate one from [Atlassian API Tokens](https://id.atlassian.com/manage-profile/security/api-tokens).\n\n**Note:** Bitbucket App Passwords are strongly recommended as they provide more granular, Bitbucket-specific permissions.\n\n### Step 2: Configure Credentials\n\n#### Option A: MCP Config File (Recommended)\n\nEdit or create `~/.mcp/configs.json`:\n\n**Using Bitbucket App Password:**\n```json\n{\n\t\"bitbucket\": {\n\t\t\"environments\": {\n\t\t\t\"ATLASSIAN_BITBUCKET_USERNAME\": \"<your_username>\",\n\t\t\t\"ATLASSIAN_BITBUCKET_APP_PASSWORD\": \"<your_app_password>\"\n\t\t}\n\t}\n}\n```\n\n**Using Atlassian API Token:**\n```json\n{\n\t\"bitbucket\": {\n\t\t\"environments\": {\n\t\t\t\"ATLASSIAN_SITE_NAME\": \"bitbucket\",\n\t\t\t\"ATLASSIAN_USER_EMAIL\": \"<your_email>\",\n\t\t\t\"ATLASSIAN_API_TOKEN\": \"<your_api_token>\"\n\t\t}\n\t}\n}\n```\n\n#### Option B: Environment Variables\n\n```bash\nexport ATLASSIAN_BITBUCKET_USERNAME=\"<your_username>\"\nexport ATLASSIAN_BITBUCKET_APP_PASSWORD=\"<your_app_password>\"\n```\n\n### Step 3: Install and Run\n\n#### Quick Start with `npx`\n\n```bash\nnpx -y @aashari/mcp-server-atlassian-bitbucket ls-workspaces\n```\n\n#### Global Installation\n\n```bash\nnpm install -g @aashari/mcp-server-atlassian-bitbucket\nmcp-atlassian-bitbucket ls-workspaces\n```\n\n## Transport Modes\n\nThis server supports two transport modes for different integration scenarios:\n\n### STDIO Transport (Default for MCP)\n- Traditional subprocess communication via stdin/stdout\n- Ideal for local AI assistant integrations (Claude Desktop, Cursor AI)\n- Uses pipe-based communication for direct MCP protocol exchange\n\n```bash\n# Run with STDIO transport (default for AI assistants)\nTRANSPORT_MODE=stdio npx @aashari/mcp-server-atlassian-bitbucket\n\n# Using npm scripts (after installation)\nnpm run mcp:stdio\n```\n\n### HTTP Transport (Default for Server Mode)\n- Modern HTTP-based transport with Server-Sent Events (SSE)\n- Supports multiple concurrent connections\n- Better for web-based integrations and development\n- Runs on port 3000 by default (configurable via PORT env var)\n- Endpoint: `http://localhost:3000/mcp`\n- Health check: `http://localhost:3000/`\n\n```bash\n# Run with HTTP transport (default when no CLI args)\nTRANSPORT_MODE=http npx @aashari/mcp-server-atlassian-bitbucket\n\n# Using npm scripts (after installation)\nnpm run mcp:http\n\n# Test with MCP Inspector\nnpm run mcp:inspect\n```\n\n### Environment Variables\n\n**Transport Configuration:**\n- `TRANSPORT_MODE`: Set to `stdio` or `http` (default: `http` for server mode, `stdio` for MCP clients)\n- `PORT`: HTTP server port (default: `3000`)\n- `DEBUG`: Enable debug logging (default: `false`)\n\n**Authentication:**\n- `ATLASSIAN_BITBUCKET_USERNAME`: Your Bitbucket username\n- `ATLASSIAN_BITBUCKET_APP_PASSWORD`: Your Bitbucket app password\n- `ATLASSIAN_API_TOKEN`: Alternative API token\n- `BITBUCKET_DEFAULT_WORKSPACE`: Default workspace (optional)\n\n### Step 4: Connect to AI Assistant\n\nConfigure your MCP-compatible client (e.g., Claude, Cursor AI):\n\n```json\n{\n\t\"mcpServers\": {\n\t\t\"bitbucket\": {\n\t\t\t\"command\": \"npx\",\n\t\t\t\"args\": [\"-y\", \"@aashari/mcp-server-atlassian-bitbucket\"]\n\t\t}\n\t}\n}\n```\n\n## MCP Tools\n\nMCP tools use `snake_case` names, `camelCase` parameters, and return Markdown-formatted responses.\n\n- **bb_ls_workspaces**: Lists available workspaces (`query`: str opt). Use: View accessible workspaces.\n- **bb_get_workspace**: Gets workspace details (`workspaceSlug`: str req). Use: View workspace information.\n- **bb_ls_repos**: Lists repositories (`workspaceSlug`: str opt, `projectKey`: str opt, `query`: str opt, `role`: str opt). Use: Find repositories.\n- **bb_get_repo**: Gets repository details (`workspaceSlug`: str req, `repoSlug`: str req). Use: Access repo information.\n- **bb_search**: Searches Bitbucket content (`workspaceSlug`: str req, `query`: str req, `scope`: str opt, `language`: str opt, `extension`: str opt). Use: Find code or PRs.\n- **bb_ls_prs**: Lists pull requests (`workspaceSlug`: str req, `repoSlug`: str req, `state`: str opt). Use: View open or merged PRs.\n- **bb_get_pr**: Gets PR details (`workspaceSlug`: str req, `repoSlug`: str req, `prId`: str req). Use: View PR details with diffs.\n- **bb_ls_pr_comments**: Lists PR comments (`workspaceSlug`: str req, `repoSlug`: str req, `prId`: str req). Use: View PR discussions.\n- **bb_add_pr_comment**: Adds comment to PR (`workspaceSlug`: str req, `repoSlug`: str req, `prId`: str req, `content`: str req, `inline`: obj opt). Use: Add feedback to PRs.\n- **bb_add_pr**: Creates a PR (`workspaceSlug`: str req, `repoSlug`: str req, `title`: str req, `sourceBranch`: str req, `targetBranch`: str opt). Use: Create new PRs.\n- **bb_add_branch**: Creates a branch (`workspaceSlug`: str req, `repoSlug`: str req, `newBranchName`: str req, `sourceBranchOrCommit`: str opt). Use: Create a feature branch.\n- **bb_clone_repo**: Clones a repository (`workspaceSlug`: str req, `repoSlug`: str req, `targetPath`: str req). Use: Clone code locally.\n- **bb_get_commit_history**: Gets commit history (`workspaceSlug`: str req, `repoSlug`: str req, `revision`: str opt, `path`: str opt). Use: View code history.\n- **bb_get_file**: Gets file content (`workspaceSlug`: str req, `repoSlug`: str req, `filePath`: str req, `revision`: str opt). Use: View specific file.\n- **bb_diff_branches**: Shows diff between branches (`workspaceSlug`: str req, `repoSlug`: str req, `sourceBranch`: str req, `targetBranch`: str req). Use: Compare branches.\n- **bb_diff_commits**: Shows diff between commits (`workspaceSlug`: str req, `repoSlug`: str req, `sourceCommit`: str req, `targetCommit`: str req). Use: Compare commits.\n- **bb_list_branches**: Lists branches (`workspaceSlug`: str req, `repoSlug`: str req, `query`: str opt, `sort`: str opt). Use: View all branches.\n\n<details>\n<summary><b>MCP Tool Examples (Click to expand)</b></summary>\n\n### `bb_ls_workspaces`\n\n**List All Workspaces:**\n```json\n{}\n```\n\n**Search Workspaces:**\n```json\n{ \"query\": \"devteam\" }\n```\n\n### `bb_get_workspace`\n\n**Get Workspace Details:**\n```json\n{ \"workspaceSlug\": \"acme-corp\" }\n```\n\n### `bb_ls_repos`\n\n**List Repos in Workspace:**\n```json\n{ \"workspaceSlug\": \"acme-corp\", \"projectKey\": \"PROJ\" }\n```\n\n**List Repos Using Default Workspace:**\n```json\n{ \"projectKey\": \"PROJ\" }\n```\n\n### `bb_get_repo`\n\n**Get Repository Details:**\n```json\n{ \"workspaceSlug\": \"acme-corp\", \"repoSlug\": \"backend-api\" }\n```\n\n### `bb_search`\n\n**Search Code:**\n```json\n{\n\t\"workspaceSlug\": \"acme-corp\",\n\t\"query\": \"Logger\",\n\t\"scope\": \"code\",\n\t\"language\": \"typescript\"\n}\n```\n\n### `bb_ls_prs`\n\n**List Open PRs:**\n```json\n{ \"workspaceSlug\": \"acme-corp\", \"repoSlug\": \"frontend-app\", \"state\": \"OPEN\" }\n```\n\n### `bb_get_pr`\n\n**Get PR Details:**\n```json\n{ \"workspaceSlug\": \"acme-corp\", \"repoSlug\": \"frontend-app\", \"prId\": \"42\" }\n```\n\n### `bb_ls_pr_comments`\n\n**List PR Comments:**\n```json\n{ \"workspaceSlug\": \"acme-corp\", \"repoSlug\": \"frontend-app\", \"prId\": \"42\" }\n```\n\n### `bb_add_pr_comment`\n\n**Add General Comment:**\n```json\n{\n\t\"workspaceSlug\": \"acme-corp\",\n\t\"repoSlug\": \"frontend-app\",\n\t\"prId\": \"42\",\n\t\"content\": \"Looks good.\"\n}\n```\n\n**Add Inline Comment:**\n```json\n{\n\t\"workspaceSlug\": \"acme-corp\",\n\t\"repoSlug\": \"frontend-app\",\n\t\"prId\": \"42\",\n\t\"content\": \"Consider refactoring.\",\n\t\"inline\": { \"path\": \"src/utils.js\", \"line\": 42 }\n}\n```\n\n### `bb_add_pr`\n\n**Create Pull Request:**\n```json\n{\n\t\"workspaceSlug\": \"acme-corp\",\n\t\"repoSlug\": \"frontend-app\",\n\t\"title\": \"Add login screen\",\n\t\"sourceBranch\": \"feature/login\"\n}\n```\n\n### `bb_add_branch`\n\n**Create New Branch:**\n```json\n{\n\t\"workspaceSlug\": \"acme-corp\",\n\t\"repoSlug\": \"frontend-app\",\n\t\"newBranchName\": \"feature/new-feature\",\n\t\"sourceBranchOrCommit\": \"main\"\n}\n```\n\n### `bb_clone_repo`\n\n**Clone Repository:**\n```json\n{\n\t\"workspaceSlug\": \"acme-corp\",\n\t\"repoSlug\": \"backend-api\",\n\t\"targetPath\": \"/Users/me/projects\"\n}\n```\n\n### `bb_get_commit_history`\n\n**View Commit History:**\n```json\n{\n\t\"workspaceSlug\": \"acme-corp\",\n\t\"repoSlug\": \"backend-api\"\n}\n```\n\n**Filtered Commit History:**\n```json\n{\n\t\"workspaceSlug\": \"acme-corp\",\n\t\"repoSlug\": \"backend-api\",\n\t\"revision\": \"develop\",\n\t\"path\": \"src/main/java/com/acme/service/UserService.java\"\n}\n```\n\n### `bb_get_file`\n\n**Get File Content:**\n```json\n{\n\t\"workspaceSlug\": \"acme-corp\",\n\t\"repoSlug\": \"backend-api\",\n\t\"filePath\": \"src/main/java/com/acme/service/Application.java\",\n\t\"revision\": \"main\"\n}\n```\n\n### `bb_diff_branches`\n\n**Compare Branches:**\n```json\n{\n\t\"workspaceSlug\": \"acme-corp\",\n\t\"repoSlug\": \"web-app\",\n\t\"sourceBranch\": \"develop\",\n\t\"targetBranch\": \"main\"\n}\n```\n\n### `bb_diff_commits`\n\n**Compare Commits:**\n```json\n{\n\t\"workspaceSlug\": \"acme-corp\",\n\t\"repoSlug\": \"web-app\",\n\t\"sourceCommit\": \"a1b2c3d\",\n\t\"targetCommit\": \"e4f5g6h\"\n}\n```\n\n### `bb_list_branches`\n\n**List All Branches:**\n```json\n{\n\t\"workspaceSlug\": \"acme-corp\",\n\t\"repoSlug\": \"frontend-app\"\n}\n```\n\n**Filtered Branches:**\n```json\n{\n\t\"workspaceSlug\": \"acme-corp\",\n\t\"repoSlug\": \"frontend-app\",\n\t\"query\": \"feature/\",\n\t\"sort\": \"name\"\n}\n```\n\n</details>\n\n## CLI Commands\n\nCLI commands use `kebab-case`. Run `--help` for details (e.g., `mcp-atlassian-bitbucket ls-workspaces --help`).\n\n- **ls-workspaces**: Lists workspaces (`--query`). Ex: `mcp-atlassian-bitbucket ls-workspaces`.\n- **get-workspace**: Gets workspace details (`--workspace-slug`). Ex: `mcp-atlassian-bitbucket get-workspace --workspace-slug acme-corp`.\n- **ls-repos**: Lists repos (`--workspace-slug`, `--project-key`, `--query`). Ex: `mcp-atlassian-bitbucket ls-repos --workspace-slug acme-corp`.\n- **get-repo**: Gets repo details (`--workspace-slug`, `--repo-slug`). Ex: `mcp-atlassian-bitbucket get-repo --workspace-slug acme-corp --repo-slug backend-api`.\n- **search**: Searches code (`--workspace-slug`, `--query`, `--scope`, `--language`). Ex: `mcp-atlassian-bitbucket search --workspace-slug acme-corp --query \"auth\"`.\n- **ls-prs**: Lists PRs (`--workspace-slug`, `--repo-slug`, `--state`). Ex: `mcp-atlassian-bitbucket ls-prs --workspace-slug acme-corp --repo-slug backend-api`.\n- **get-pr**: Gets PR details (`--workspace-slug`, `--repo-slug`, `--pr-id`). Ex: `mcp-atlassian-bitbucket get-pr --workspace-slug acme-corp --repo-slug backend-api --pr-id 42`.\n- **ls-pr-comments**: Lists PR comments (`--workspace-slug`, `--repo-slug`, `--pr-id`). Ex: `mcp-atlassian-bitbucket ls-pr-comments --workspace-slug acme-corp --repo-slug backend-api --pr-id 42`.\n- **add-pr-comment**: Adds PR comment (`--workspace-slug`, `--repo-slug`, `--pr-id`, `--content`). Ex: `mcp-atlassian-bitbucket add-pr-comment --workspace-slug acme-corp --repo-slug backend-api --pr-id 42 --content \"Looks good\"`.\n- **add-pr**: Creates PR (`--workspace-slug`, `--repo-slug`, `--title`, `--source-branch`). Ex: `mcp-atlassian-bitbucket add-pr --workspace-slug acme-corp --repo-slug backend-api --title \"New feature\" --source-branch feature/login`.\n- **get-file**: Gets file content (`--workspace-slug`, `--repo-slug`, `--file-path`). Ex: `mcp-atlassian-bitbucket get-file --workspace-slug acme-corp --repo-slug backend-api --file-path src/main.js`.\n- **add-branch**: Creates branch (`--workspace-slug`, `--repo-slug`, `--new-branch-name`). Ex: `mcp-atlassian-bitbucket add-branch --workspace-slug acme-corp --repo-slug backend-api --new-branch-name feature/new`.\n\n<details>\n<summary><b>CLI Command Examples (Click to expand)</b></summary>\n\n### List and View Workspaces/Repos\n\n```bash\n# List all workspaces\nmcp-atlassian-bitbucket ls-workspaces\n\n# Get details of a specific workspace\nmcp-atlassian-bitbucket get-workspace --workspace-slug acme-corp\n\n# List repositories in a workspace\nmcp-atlassian-bitbucket ls-repos --workspace-slug acme-corp --project-key PROJ\n\n# Get details of a specific repository\nmcp-atlassian-bitbucket get-repo --workspace-slug acme-corp --repo-slug backend-api\n```\n\n### Working with Pull Requests\n\n```bash\n# List open pull requests in a repository\nmcp-atlassian-bitbucket ls-prs --workspace-slug acme-corp --repo-slug frontend-app --state OPEN\n\n# Get details of a specific pull request with code changes\nmcp-atlassian-bitbucket get-pr --workspace-slug acme-corp --repo-slug frontend-app --pr-id 42\n\n# List comments on a pull request\nmcp-atlassian-bitbucket ls-pr-comments --workspace-slug acme-corp --repo-slug frontend-app --pr-id 42\n\n# Add a comment to a pull request\nmcp-atlassian-bitbucket add-pr-comment --workspace-slug acme-corp --repo-slug frontend-app --pr-id 42 --content \"Looks good to merge.\"\n\n# Create a new pull request\nmcp-atlassian-bitbucket add-pr --workspace-slug acme-corp --repo-slug frontend-app --title \"Add login screen\" --source-branch feature/login\n```\n\n### Code and Commits\n\n```bash\n# Search for code\nmcp-atlassian-bitbucket search --workspace-slug acme-corp --query \"Logger\" --scope code --language typescript\n\n# View commit history\nmcp-atlassian-bitbucket get-commit-history --workspace-slug acme-corp --repo-slug backend-api --revision develop\n\n# Get file content\nmcp-atlassian-bitbucket get-file --workspace-slug acme-corp --repo-slug backend-api --file-path \"src/Application.java\" --revision main\n\n# Compare branches\nmcp-atlassian-bitbucket diff-branches --workspace-slug acme-corp --repo-slug web-app --source-branch develop --target-branch main\n\n# Compare commits\nmcp-atlassian-bitbucket diff-commits --workspace-slug acme-corp --repo-slug web-app --source-commit a1b2c3d --target-commit e4f5g6h\n```\n\n### Branch Management\n\n```bash\n# List branches\nmcp-atlassian-bitbucket list-branches --workspace-slug acme-corp --repo-slug frontend-app --query \"feature/\" --sort name\n\n# Create a new branch\nmcp-atlassian-bitbucket add-branch --workspace-slug acme-corp --repo-slug frontend-app --new-branch-name feature/new-feature --source-branch-or-commit main\n\n# Clone a repository\nmcp-atlassian-bitbucket clone --workspace-slug acme-corp --repo-slug backend-api --target-path ./cloned-projects\n```\n\n</details>\n\n## Response Format\n\nAll responses are Markdown-formatted, including:\n\n- **Title**: Operation performed or entity viewed.\n- **Context**: Workspace, repository, pull request, or branch information.\n- **Content**: Primary data such as file content, PR details, or search results.\n- **Metadata**: Timestamps, authors, and statistics.\n- **Diffs**: Code changes with syntax highlighting for diffs between branches/commits.\n\n<details>\n<summary><b>Response Format Examples (Click to expand)</b></summary>\n\n### Repository Details\n\n```markdown\n# Repository: backend-api\n\n**Workspace:** acme-corp\n**Full Name:** acme-corp/backend-api\n**Language:** Java\n**Created:** 2024-01-15 by John Smith\n**Updated:** 2025-05-10 (2 days ago)\n\n## Overview\nSpring Boot backend API for the ACME product suite.\n\n## Statistics\n- **Default Branch:** main\n- **Size:** 24.5 MB\n- **Commits:** 358\n- **Open PRs:** 4\n- **Forks:** 3\n\n## Recent Activity\n- PR #42: \"Add OAuth2 support\" by Jane Doe (Open)\n- PR #41: \"Fix pagination bug\" by Alex Kim (Merged)\n- PR #40: \"Update dependencies\" by John Smith (Merged)\n\n*Repository URL: https://bitbucket.org/acme-corp/backend-api*\n```\n\n### Pull Request Review\n\n```markdown\n# Pull Request #42: Add OAuth2 support\n\n**Repository:** acme-corp/backend-api\n**Author:** Jane Doe\n**State:** OPEN\n**Created:** 2025-05-15 (4 days ago)\n**Updated:** 2025-05-18 (yesterday)\n\n## Description\nImplements OAuth2 authentication flow with support for:\n- Authorization code grant\n- Refresh tokens\n- Token caching\n\n## Changes\n- **Files changed:** 7\n- **Additions:** 245 lines\n- **Deletions:** 32 lines\n\n## Diff for src/auth/OAuthService.java\n\n\n\t@@ -10,6 +10,25 @@ public class OAuthService {\n\t\tprivate final TokenRepository tokenRepository;\n\t\tprivate final HttpClient httpClient;\n\t\n\t+    @Autowired\n\t+    public OAuthService(\n\t+            TokenRepository tokenRepository,\n\t+            HttpClient httpClient) {\n\t+        this.tokenRepository = tokenRepository;\n\t+        this.httpClient = httpClient;\n\t+    }\n\t+\n\t+    public TokenResponse refreshToken(String refreshToken) {\n\t+        // Validate refresh token\n\t+        if (StringUtils.isEmpty(refreshToken)) {\n\t+            throw new InvalidTokenException(\"Refresh token cannot be empty\");\n\t+        }\n\t+        \n\t+        // Call OAuth server for new access token\n\t+        return httpClient.post(\"/oauth/token\")\n\t+            .body(Map.of(\"grant_type\", \"refresh_token\", \"refresh_token\", refreshToken))\n\t+            .execute()\n\t+            .as(TokenResponse.class);\n\t+    }\n\n## Comments (3)\n1. **John Smith** (2 days ago):\n   > Please add unit tests for the refresh token flow\n\n2. **Jane Doe** (yesterday):\n   > Added tests in the latest commit\n\n3. **Approval by:** Alex Kim (yesterday)\n\n*Pull Request URL: https://bitbucket.org/acme-corp/backend-api/pull-requests/42*\n```\n\n</details>\n\n## Development\n\n```bash\n# Clone repository\ngit clone https://github.com/aashari/mcp-server-atlassian-bitbucket.git\ncd mcp-server-atlassian-bitbucket\n\n# Install dependencies\nnpm install\n\n# Run in development mode\nnpm run dev:server\n\n# Run tests\nnpm test\n```\n\n## Contributing\n\nContributions are welcome! Please:\n\n1. Fork the repository.\n2. Create a feature branch (`git checkout -b feature/xyz`).\n3. Commit changes (`git commit -m \"Add xyz feature\"`).\n4. Push to the branch (`git push origin feature/xyz`).\n5. Open a pull request.\n\nSee [CONTRIBUTING.md](CONTRIBUTING.md) for details.\n\n## License\n\n[ISC License](LICENSE)\n",
  "category": "Development",
  "quality_score": 73,
  "archestra_config": {
    "client_config_permutations": {
      "mcpServers": {
        "aashari-mcp-server-atlassian-bitbucket": {
          "command": "npx",
          "args": [
            "-y",
            "@aashari/mcp-server-atlassian-bitbucket"
          ],
          "env": {}
        },
        "aashari-mcp-server-atlassian-bitbucket-stdio": {
          "command": "npx",
          "args": [
            "-y",
            "@aashari/mcp-server-atlassian-bitbucket"
          ],
          "env": {
            "TRANSPORT_MODE": "stdio"
          }
        },
        "aashari-mcp-server-atlassian-bitbucket-http": {
          "command": "npx",
          "args": [
            "-y",
            "@aashari/mcp-server-atlassian-bitbucket"
          ],
          "env": {
            "TRANSPORT_MODE": "http"
          }
        }
      }
    },
    "oauth": {
      "provider": null,
      "required": false
    }
  },
  "github_info": {
    "owner": "aashari",
    "repo": "mcp-server-atlassian-bitbucket",
    "url": "https://github.com/aashari/mcp-server-atlassian-bitbucket",
    "name": "mcp-server-atlassian-bitbucket",
    "path": null,
    "stars": 54,
    "contributors": 6,
    "issues": 0,
    "releases": true,
    "ci_cd": true,
    "latest_commit_hash": "28629f12381460263c76b539fb1d60bccb988442"
  },
  "programming_language": "TypeScript",
  "framework": null,
  "last_scraped_at": "2025-08-04T09:35:02.873Z",
  "evaluation_model": "gemini-2.5-pro",
  "protocol_features": {
    "implementing_tools": true,
    "implementing_prompts": false,
    "implementing_resources": true,
    "implementing_sampling": false,
    "implementing_roots": false,
    "implementing_logging": true,
    "implementing_stdio": true,
    "implementing_streamable_http": true,
    "implementing_oauth2": false
  },
  "dependencies": [
    {
      "name": "@modelcontextprotocol/sdk",
      "importance": 10
    },
    {
      "name": "express",
      "importance": 10
    },
    {
      "name": "commander",
      "importance": 8
    },
    {
      "name": "cors",
      "importance": 7
    },
    {
      "name": "turndown",
      "importance": 7
    },
    {
      "name": "zod",
      "importance": 6
    },
    {
      "name": "dotenv",
      "importance": 5
    }
  ],
  "raw_dependencies": "=== package.json ===\n{\n\t\"name\": \"@aashari/mcp-server-atlassian-bitbucket\",\n\t\"version\": \"1.43.2\",\n\t\"description\": \"Node.js/TypeScript MCP server for Atlassian Bitbucket. Enables AI systems (LLMs) to interact with workspaces, repositories, and pull requests via tools (list, get, comment, search). Connects AI directly to version control workflows through the standard MCP interface.\",\n\t\"main\": \"dist/index.js\",\n\t\"types\": \"dist/index.d.ts\",\n\t\"type\": \"commonjs\",\n\t\"repository\": {\n\t\t\"type\": \"git\",\n\t\t\"url\": \"https://github.com/aashari/mcp-server-atlassian-bitbucket.git\"\n\t},\n\t\"bin\": {\n\t\t\"mcp-atlassian-bitbucket\": \"./dist/index.js\"\n\t},\n\t\"scripts\": {\n\t\t\"build\": \"tsc\",\n\t\t\"prepare\": \"npm run build && node scripts/ensure-executable.js\",\n\t\t\"postinstall\": \"node scripts/ensure-executable.js\",\n\t\t\"test\": \"jest\",\n\t\t\"test:coverage\": \"jest --coverage\",\n\t\t\"test:cli\": \"jest src/cli/.*\\\\.cli\\\\.test\\\\.ts --runInBand --testTimeout=60000\",\n\t\t\"lint\": \"eslint src --ext .ts --config eslint.config.mjs\",\n\t\t\"format\": \"prettier --write 'src/**/*.ts' 'scripts/**/*.js'\",\n\t\t\"publish:npm\": \"npm publish\",\n\t\t\"update:check\": \"npx npm-check-updates\",\n\t\t\"update:deps\": \"npx npm-check-updates -u && npm install --legacy-peer-deps\",\n\t\t\"update:version\": \"node scripts/update-version.js\",\n\t\t\"mcp:stdio\": \"TRANSPORT_MODE=stdio npm run build && node dist/index.js\",\n\t\t\"mcp:http\": \"TRANSPORT_MODE=http npm run build && node dist/index.js\",\n\t\t\"mcp:inspect\": \"TRANSPORT_MODE=http npm run build && (node dist/index.js &) && sleep 2 && npx @modelcontextprotocol/inspector http://localhost:3000/mcp\",\n\t\t\"dev:stdio\": \"npm run build && npx @modelcontextprotocol/inspector -e TRANSPORT_MODE=stdio -e DEBUG=true node dist/index.js\",\n\t\t\"dev:http\": \"DEBUG=true TRANSPORT_MODE=http npm run build && node dist/index.js\",\n\t\t\"dev:server\": \"DEBUG=true npm run build && npx @modelcontextprotocol/inspector -e DEBUG=true node dist/index.js\",\n\t\t\"dev:cli\": \"DEBUG=true npm run build && DEBUG=true node dist/index.js\",\n\t\t\"start:server\": \"npm run build && npx @modelcontextprotocol/inspector node dist/index.js\",\n\t\t\"start:cli\": \"npm run build && node dist/index.js\"\n\t},\n\t\"keywords\": [\n\t\t\"mcp\",\n\t\t\"typescript\",\n\t\t\"claude\",\n\t\t\"anthropic\",\n\t\t\"ai\",\n\t\t\"atlassian\",\n\t\t\"bitbucket\",\n\t\t\"repository\",\n\t\t\"version-control\",\n\t\t\"pull-request\",\n\t\t\"server\",\n\t\t\"model-context-protocol\",\n\t\t\"tools\",\n\t\t\"resources\",\n\t\t\"tooling\",\n\t\t\"ai-integration\",\n\t\t\"mcp-server\",\n\t\t\"llm\",\n\t\t\"ai-connector\",\n\t\t\"external-tools\",\n\t\t\"cli\",\n\t\t\"mcp-inspector\"\n\t],\n\t\"author\": \"\",\n\t\"license\": \"ISC\",\n\t\"devDependencies\": {\n\t\t\"@eslint/js\": \"^9.32.0\",\n\t\t\"@semantic-release/changelog\": \"^6.0.3\",\n\t\t\"@semantic-release/exec\": \"^7.1.0\",\n\t\t\"@semantic-release/git\": \"^10.0.1\",\n\t\t\"@semantic-release/github\": \"^11.0.3\",\n\t\t\"@semantic-release/npm\": \"^12.0.1\",\n\t\t\"@types/cors\": \"^2.8.19\",\n\t\t\"@types/express\": \"^5.0.3\",\n\t\t\"@types/jest\": \"^30.0.0\",\n\t\t\"@types/node\": \"^24.0.3\",\n\t\t\"@types/turndown\": \"^5.0.5\",\n\t\t\"@typescript-eslint/eslint-plugin\": \"^8.38.0\",\n\t\t\"@typescript-eslint/parser\": \"^8.38.0\",\n\t\t\"eslint\": \"^9.32.0\",\n\t\t\"eslint-config-prettier\": \"^10.1.5\",\n\t\t\"eslint-plugin-filenames\": \"^1.3.2\",\n\t\t\"eslint-plugin-prettier\": \"^5.5.0\",\n\t\t\"jest\": \"^30.0.5\",\n\t\t\"nodemon\": \"^3.1.10\",\n\t\t\"npm-check-updates\": \"^18.0.1\",\n\t\t\"prettier\": \"^3.6.2\",\n\t\t\"semantic-release\": \"^24.2.7\",\n\t\t\"ts-jest\": \"^29.4.0\",\n\t\t\"ts-node\": \"^10.9.2\",\n\t\t\"typescript\": \"^5.8.3\",\n\t\t\"typescript-eslint\": \"^8.38.0\"\n\t},\n\t\"publishConfig\": {\n\t\t\"registry\": \"https://registry.npmjs.org/\",\n\t\t\"access\": \"public\"\n\t},\n\t\"dependencies\": {\n\t\t\"@modelcontextprotocol/sdk\": \"^1.17.1\",\n\t\t\"commander\": \"^14.0.0\",\n\t\t\"cors\": \"^2.8.5\",\n\t\t\"dotenv\": \"^17.2.1\",\n\t\t\"express\": \"^5.1.0\",\n\t\t\"turndown\": \"^7.2.0\",\n\t\t\"zod\": \"^3.25.67\"\n\t},\n\t\"directories\": {\n\t\t\"example\": \"examples\"\n\t},\n\t\"jest\": {\n\t\t\"preset\": \"ts-jest\",\n\t\t\"testEnvironment\": \"node\",\n\t\t\"testMatch\": [\n\t\t\t\"**/src/**/*.test.ts\"\n\t\t],\n\t\t\"collectCoverageFrom\": [\n\t\t\t\"src/**/*.ts\",\n\t\t\t\"!src/**/*.test.ts\",\n\t\t\t\"!src/**/*.spec.ts\"\n\t\t],\n\t\t\"coveragePathIgnorePatterns\": [\n\t\t\t\"/node_modules/\",\n\t\t\t\"/dist/\",\n\t\t\t\"/coverage/\"\n\t\t],\n\t\t\"coverageReporters\": [\n\t\t\t\"text\",\n\t\t\t\"lcov\",\n\t\t\t\"json-summary\"\n\t\t],\n\t\t\"transform\": {\n\t\t\t\"^.+\\\\.tsx?$\": [\n\t\t\t\t\"ts-jest\",\n\t\t\t\t{\n\t\t\t\t\t\"useESM\": true\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t\"moduleNameMapper\": {\n\t\t\t\"(.*)\\\\.(js|jsx)$\": \"$1\"\n\t\t},\n\t\t\"extensionsToTreatAsEsm\": [\n\t\t\t\".ts\"\n\t\t],\n\t\t\"moduleFileExtensions\": [\n\t\t\t\"ts\",\n\t\t\t\"tsx\",\n\t\t\t\"js\",\n\t\t\t\"jsx\",\n\t\t\t\"json\",\n\t\t\t\"node\"\n\t\t]\n\t}\n}\n\n\n=== scripts/package.json ===\n{\n  \"type\": \"module\"\n} "
}