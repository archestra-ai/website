{
  "name": "victoriametrics-community__mcp-victoriametrics",
  "display_name": "mcp-victoriametrics",
  "description": "The implementation of Model Context Protocol (MCP) server for VictoriaMetrics",
  "author": {
    "name": "VictoriaMetrics-Community"
  },
  "server": {
    "command": "mcp-victoriametrics",
    "args": [],
    "env": {
      "MCP_SERVER_MODE": "${user_config.mcp_server_mode}",
      "VM_INSTANCE_ENTRYPOINT": "${user_config.vm_instance_entrypoint}",
      "VM_INSTANCE_TYPE": "${user_config.vm_instance_type}"
    },
    "type": "local"
  },
  "tools": [],
  "prompts": [],
  "keywords": [],
  "user_config": {
    "mcp_server_mode": {
      "type": "string",
      "title": "MCP Server Mode",
      "description": "The mode for MCP clients to connect. 'sse' for Server-Sent Events, 'http' for Streamable HTTP.",
      "default": "sse",
      "required": false
    },
    "vm_instance_entrypoint": {
      "type": "string",
      "title": "VictoriaMetrics Instance URL",
      "description": "The URL of your VictoriaMetrics instance (e.g., https://play.victoriametrics.com).",
      "default": "https://play.victoriametrics.com",
      "required": false
    },
    "vm_instance_type": {
      "type": "string",
      "title": "VictoriaMetrics Instance Type",
      "description": "The type of VictoriaMetrics instance (single-node or cluster).",
      "default": "cluster",
      "required": false
    }
  },
  "readme": "# VictoriaMetrics MCP Server\n\n[![Latest Release](https://img.shields.io/github/v/release/VictoriaMetrics-Community/mcp-victoriametrics?sort=semver&label=&filter=!*-victorialogs&logo=github&labelColor=gray&color=gray&link=https%3A%2F%2Fgithub.com%2FVictoriaMetrics-Community%2Fmcp-victoriametrics%2Freleases%2Flatest)](https://github.com/VictoriaMetrics-Community/mcp-victoriametrics/releases)\n[![Trust Score](https://archestra.ai/mcp-catalog/api/badge/quality/VictoriaMetrics-Community/mcp-victoriametrics)](https://archestra.ai/mcp-catalog/victoriametrics-community__mcp-victoriametrics)\n[![smithery badge](https://smithery.ai/badge/@VictoriaMetrics-Community/mcp-victoriametrics)](https://smithery.ai/server/@VictoriaMetrics-Community/mcp-victoriametrics)\n![License](https://img.shields.io/github/license/VictoriaMetrics-Community/mcp-victoriametrics?labelColor=green&label=&link=https%3A%2F%2Fgithub.com%2FVictoriaMetrics-Community%2Fmcp-victoriametrics%2Fblob%2Fmain%2FLICENSE)\n![Slack](https://img.shields.io/badge/Join-4A154B?logo=slack&link=https%3A%2F%2Fslack.victoriametrics.com)\n![X](https://img.shields.io/twitter/follow/VictoriaMetrics?style=flat&label=Follow&color=black&logo=x&labelColor=black&link=https%3A%2F%2Fx.com%2FVictoriaMetrics)\n![Reddit](https://img.shields.io/reddit/subreddit-subscribers/VictoriaMetrics?style=flat&label=Join&labelColor=red&logoColor=white&logo=reddit&link=https%3A%2F%2Fwww.reddit.com%2Fr%2FVictoriaMetrics)\n\nThe implementation of [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) server for [VictoriaMetrics](https://docs.victoriametrics.com/victoriametrics/).\n\nThis provides access to your VictoriaMetrics instance and seamless integration with [VictoriaMetrics APIs](https://docs.victoriametrics.com/victoriametrics/url-examples/) and [documentation](https://docs.victoriametrics.com/).\nIt can give you a comprehensive interface for monitoring, observability, and debugging tasks related to your VictoriaMetrics instances, enable advanced automation and interaction capabilities for engineers and tools.\n\n## Features\n\nThis MCP server allows you to use almost all read-only APIs of VictoriaMetrics, i.e. all functions available in [VMUI](https://docs.victoriametrics.com/#vmui):\n\n- Querying metrics and exploring data (even drawing graphs if your client supports it)\n- Listing and exporting available metrics, labels, labels values and entire series\n- Analyzing and testing your alerting and recording rules and alerts\n- Showing parameters of your VictoriaMetrics instance\n- Exploring cardinality of your data and metrics usage statistics\n- Analyzing, tracing, prettifying and explaining your queries\n- Debugging your relabeling rules, downsampling and retention policy configurations \n- Integration with [VictoriaMetrics Cloud](https://docs.victoriametrics.com/victoriametrics-cloud/)\n \nIn addition, the MCP server contains embedded up-to-date documentation and is able to search it without online access.\n\nMore details about the exact available tools and prompts can be found in the [Usage](#usage) section.\n\nYou can combine functionality of tools, docs search in your prompts and invent great usage scenarios for your VictoriaMetrics instance.\nJust check the [Dialog example](#dialog-example) section to see how it can work.\nAnd please note the fact that the quality of the MCP Server and its responses depends very much on the capabilities of your client and the quality of the model you are using.\n\nYou can also combine the MCP server with other observability or doc search related MCP Servers and get even more powerful results.\n\n## Try without installation\n\nThere is a publicly available instance of the VictoriaMetrics MCP Server that you can use to test the features without installing it: \n\n```\nhttps://play-mcp.victoriametrics.com/mcp\n```\n\nIt's available in [Streamable HTTP](#modes) mode and configured to work with [Public VictoriaMetrics Playground](https://play.victoriametrics.com).\n\nHere is example of configuration for [Claude Desktop](https://claude.ai/download):\n\n![image](https://github.com/user-attachments/assets/b9cca3ff-f4c3-47bc-aac7-9359f12e858e)\n\n## Requirements\n\n- [VictoriaMetrics](https://docs.victoriametrics.com/victoriametrics/) or [VictoriaMetrics Cloud](https://docs.victoriametrics.com/victoriametrics-cloud/) instance ([single-node](https://docs.victoriametrics.com/victoriametrics/single-server-victoriametrics/) or [cluster](https://docs.victoriametrics.com/victoriametrics/cluster-victoriametrics/))\n- Go 1.24 or higher (if you want to build from source)\n\n## Installation\n\n### Go\n\n```bash\ngo install github.com/VictoriaMetrics-Community/mcp-victoriametrics/cmd/mcp-victoriametrics@latest\n```\n\n### Binaries\n\nJust download the latest release from [Releases](https://github.com/VictoriaMetrics-Community/mcp-victoriametrics/releases) page and put it to your PATH.\n\nExample for Linux x86_64 (note that other architectures and platforms are also available):\n\n```bash\nlatest=$(curl -s https://api.github.com/repos/VictoriaMetrics-Community/mcp-victoriametrics/releases/latest | grep 'tag_name' | cut -d\\\" -f4)\nwget https://github.com/VictoriaMetrics-Community/mcp-victoriametrics/releases/download/$latest/mcp-victoriametrics_Linux_x86_64.tar.gz\ntar axvf mcp-victoriametrics_Linux_x86_64.tar.gz\n```\n\n### Docker\n\nYou can run VictoriaMetrics MCP Server using Docker. \n\nThis is the easiest way to get started without needing to install Go or build from source.\n\n```bash\ndocker run -d --name mcp-victoriametrics \\\n  -e MCP_SERVER_MODE=sse \\\n  -e VM_INSTANCE_ENTRYPOINT=https://play.victoriametrics.com \\\n  -e VM_INSTANCE_TYPE=cluster \\\n  ghcr.io/victoriametrics-community/mcp-victoriametrics\n```\n\nYou should replace environment variables with your own parameters.\n\nNote that the `MCP_SERVER_MODE=sse` flag is used to enable Server-Sent Events mode, which used by MCP clients to connect.\nAlternatively, you can use `MCP_SERVER_MODE=http` to enable Streamable HTTP mode. More details about server modes can be found in the [Configuration](#configuration) section.\n\nSee available docker images in [github registry](https://github.com/orgs/VictoriaMetrics-Community/packages/container/package/mcp-victoriametrics).\n\nAlso see [Using Docker instead of binary](#using-docker-instead-of-binary) section for more details about using Docker with MCP server with clients in stdio mode.\n\n### Source Code\n\nFor building binary from source code you can use the following approach:\n\n- Clone repo:\n  \n  ```bash\n  git clone https://github.com/VictoriaMetrics-Community/mcp-victoriametrics.git\n  cd mcp-victoriametrics\n  ```\n- Build binary from cloned source code: \n  \n  ```bash\n  make build\n  # after that you can find binary mcp-victoriametrics and copy this file to your PATH or run inplace\n  ```\n- Build image from cloned source code:\n  \n  ```bash\n  docker build -t mcp-victoriametrics .\n  # after that you can use docker image mcp-victoriametrics for running or pushing\n  ```\n\n### Smithery\n\nTo install VictoriaMetrics MCP Server for your client automatically via Smithery, yo can use the following commands:\n\n```bash\n# Get the list of supported MCP clients\nnpx -y @smithery/cli list clients\n#Available clients:\n#  claude\n#  cline\n#  windsurf\n#  roocode\n#  witsy\n#  enconvo\n#  cursor\n#  vscode\n#  vscode-insiders\n#  boltai\n#  amazon-bedrock\n\n# Install VictoriaMetrics MCP server for your client\nnpx -y @smithery/cli install @VictoriaMetrics-Community/mcp-victoriametrics --client <YOUR-CLIENT-NAME>\n# and follow the instructions\n```\n\n## Configuration\n\nMCP Server for VictoriaMetrics is configured via environment variables:\n\n| Variable                                 | Description                                                                                                                                                                                                                                                         | Required                               | Default          | Allowed values         |\n|------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|------------------|------------------------|\n| `VM_INSTANCE_ENTRYPOINT` / `VMC_API_KEY` | URL to VictoriaMetrics instance (it should be root `/` URL of vmsingle or vmselect)                                                                                                                                                                                 | Yes (if you don't use `VMC_API_KEY`)   | -                | -                      |\n| `VM_INSTANCE_TYPE`                       | Type of VictoriaMetrics instance                                                                                                                                                                                                                                    | Yes (if you don't use ``VMC_API_KEY``) | -                | `single`, `cluster`    |\n| `VM_INSTANCE_BEARER_TOKEN`               | Authentication token for VictoriaMetrics API                                                                                                                                                                                                                        | No                                     | -                | -                      |\n| `VMC_API_KEY`                            | [API key from VictoriaMetrics Cloud Console](https://docs.victoriametrics.com/victoriametrics-cloud/api/)                                                                                                                                                           | No                                     | -                | -                      |\n| `MCP_SERVER_MODE`                        | Server operation mode. See [Modes](#modes) for details.                                                                                                                                                                                                             | No                                     | `stdio`          | `stdio`, `sse`, `http` |\n| `MCP_LISTEN_ADDR`                        | Address for SSE or HTTP server to listen on                                                                                                                                                                                                                         | No                                     | `localhost:8080` | -                      |\n| `MCP_DISABLED_TOOLS`                     | Comma-separated list of tools to disable                                                                                                                                                                                                                            | No                                     | -                | -                      |\n| `MCP_HEARTBEAT_INTERVAL`                 | Defines the heartbeat interval for the streamable-http protocol. <br /> It means the MCP server will send a heartbeat to the client through the GET connection, <br /> to keep the connection alive from being closed by the network infrastructure (e.g. gateways) | No                                     | `30s`            | -                      |\n\nYou can use two options to connect to your VictoriaMetrics instance:\n\n- Using `VM_INSTANCE_ENTRYPOINT` + `VM_INSTANCE_TYPE` + `VM_INSTANCE_BEARER_TOKEN` (optional) environment variables to connect to any single-node or cluster instance of VictoriaMetrics.\n- Using `VMC_API_KEY` environment variable to work with your [VictoriaMetrics Cloud](https://victoriametrics.com/products/cloud/) instances.\n\n### Modes\n\nMCP Server supports the following modes of operation (transports):\n\n- `stdio` - Standard input/output mode, where the server reads commands from standard input and writes responses to standard output. This is the default mode and is suitable for local servers.\n- `sse` - Server-Sent Events. Server will expose the `/sse` and `/message` endpoints for SSE connections.\n- `http` - Streamable HTTP. Server will expose the `/mcp` endpoint for HTTP connections.\n\nMore info about traqnsports you can find in MCP docs:\n\n- [Core concepts -> Transports](https://modelcontextprotocol.io/docs/concepts/transports)\n- [Specifications -> Transports](https://modelcontextprotocol.io/specification/2025-03-26/basic/transports)\n\n### Сonfiguration examples\n\n```bash\n# For a single-node instance\nexport VM_INSTANCE_ENTRYPOINT=\"http://localhost:8428\"\nexport VM_INSTANCE_TYPE=\"single\"\nexport VM_INSTANCE_BEARER_TOKEN=\"your-token\"\n\n# For a cluster\nexport VM_INSTANCE_ENTRYPOINT=\"https://play.victoriametrics.com\"\nexport VM_INSTANCE_TYPE=\"cluster\"\nexport MCP_DISABLED_TOOLS=\"export,metric_statistics,test_rules\" # disable export, statistics and rules unit test tools\n\n# For VictoriaMetrics Cloud\nexport VMC_API_KEY=\"<you-api-key>\"\n\n# Server mode\nexport MCP_SERVER_MODE=\"sse\"\nexport MCP_LISTEN_ADDR=\"0.0.0.0:8080\"\n```\n\n## Endpoints\n\nIn SSE and HTTP modes the MCP server provides the following endpoints:\n\n| Endpoint | Description |\n|----------|-------------|\n| `/sse` + `/message`      | Endpoints for messages in SSE mode (for MCP clients that support SSE) |\n| `/mcp`      | HTTP endpoint for streaming messages in HTTP mode (for MCP clients that support Streamable HTTP) |\n| `/metrics`   | Metrics in Prometheus format for monitoring the MCP server |\n| `/health/liveness`       | Liveness check endpoint to ensure the server is running |\n| `/health/readiness`      | Readiness check endpoint to ensure the server is ready to accept requests |\n\n## Setup in clients\n\n### Cursor\n\nGo to: `Settings` -> `Cursor Settings` -> `MCP` -> `Add new global MCP server` and paste the following configuration into your Cursor `~/.cursor/mcp.json` file:\n\n```json\n{\n  \"mcpServers\": {\n    \"victoriametrics\": {\n      \"command\": \"/path/to/mcp-victoriametrics\",\n      \"env\": {\n        \"VM_INSTANCE_ENTRYPOINT\": \"<YOUR_VM_INSTANCE>\",\n        \"VM_INSTANCE_TYPE\": \"<YOUR_VM_INSTANCE_TYPE>\",\n        \"VM_INSTANCE_BEARER_TOKEN\": \"<YOUR_VM_BEARER_TOKEN>\"\n      }\n    }\n  }\n}\n```\n\nSee [Cursor MCP docs](https://docs.cursor.com/context/model-context-protocol) for more info.\n\n### Claude Desktop\n\nAdd this to your Claude Desktop `claude_desktop_config.json` file (you can find it if open `Settings` -> `Developer` -> `Edit config`):\n\n```json\n{\n  \"mcpServers\": {\n    \"victoriametrics\": {\n      \"command\": \"/path/to/mcp-victoriametrics\",\n      \"env\": {\n        \"VM_INSTANCE_ENTRYPOINT\": \"<YOUR_VM_INSTANCE>\",\n        \"VM_INSTANCE_TYPE\": \"<YOUR_VM_INSTANCE_TYPE>\",\n        \"VM_INSTANCE_BEARER_TOKEN\": \"<YOUR_VM_BEARER_TOKEN>\"\n      }\n    }\n  }\n}\n```\n\nSee [Claude Desktop MCP docs](https://modelcontextprotocol.io/quickstart/user) for more info.\n\n### Claude Code\n\nRun the command:\n\n```sh\nclaude mcp add victoriametrics -- /path/to/mcp-victoriametrics \\\n  -e VM_INSTANCE_ENTRYPOINT=<YOUR_VM_INSTANCE> \\\n  -e VM_INSTANCE_TYPE=<YOUR_VM_INSTANCE_TYPE>\n  -e VM_INSTANCE_BEARER_TOKEN=<YOUR_VM_BEARER_TOKEN>\n```\n\nSee [Claude Code MCP docs](https://docs.anthropic.com/en/docs/agents-and-tools/claude-code/tutorials#set-up-model-context-protocol-mcp) for more info.\n\n### Visual Studio Code\n\nAdd this to your VS Code MCP config file:\n\n```json\n{\n  \"servers\": {\n    \"victoriametrics\": {\n      \"type\": \"stdio\",\n      \"command\": \"/path/to/mcp-victoriametrics\",\n      \"env\": {\n        \"VM_INSTANCE_ENTRYPOINT\": \"<YOUR_VM_INSTANCE>\",\n        \"VM_INSTANCE_TYPE\": \"<YOUR_VM_INSTANCE_TYPE>\",\n        \"VM_INSTANCE_BEARER_TOKEN\": \"<YOUR_VM_BEARER_TOKEN>\"\n      }\n    }\n  }\n}\n```\n\nSee [VS Code MCP docs](https://code.visualstudio.com/docs/copilot/chat/mcp-servers) for more info.\n\n### Zed\n\nAdd the following to your Zed config file:\n\n```json\n  \"context_servers\": {\n    \"victoriametrics\": {\n      \"command\": {\n        \"path\": \"/path/to/mcp-victoriametrics\",\n        \"args\": [],\n        \"env\": {\n          \"VM_INSTANCE_ENTRYPOINT\": \"<YOUR_VM_INSTANCE>\",\n          \"VM_INSTANCE_TYPE\": \"<YOUR_VM_INSTANCE_TYPE>\",\n          \"VM_INSTANCE_BEARER_TOKEN\": \"<YOUR_VM_BEARER_TOKEN>\"\n        }\n      },\n      \"settings\": {}\n    }\n  }\n```\n\nSee [Zed MCP docs](https://zed.dev/docs/ai/mcp) for more info.\n\n### JetBrains IDEs\n\n- Open `Settings` -> `Tools` -> `AI Assistant` -> `Model Context Protocol (MCP)`.\n- Click `Add (+)`\n- Select `As JSON`\n- Put the following to the input field:\n\n```json\n{\n  \"mcpServers\": {\n    \"victoriametrics\": {\n      \"command\": \"/path/to/mcp-victoriametrics\",\n      \"env\": {\n        \"VM_INSTANCE_ENTRYPOINT\": \"<YOUR_VM_INSTANCE>\",\n        \"VM_INSTANCE_TYPE\": \"<YOUR_VM_INSTANCE_TYPE>\",\n        \"VM_INSTANCE_BEARER_TOKEN\": \"<YOUR_VM_BEARER_TOKEN>\"\n      }\n    }\n  }\n}\n```\n\n### Windsurf\n\nAdd the following to your Windsurf MCP config file.\n\n```json\n{\n  \"mcpServers\": {\n    \"victoriametrics\": {\n      \"command\": \"/path/to/mcp-victoriametrics\",\n      \"env\": {\n        \"VM_INSTANCE_ENTRYPOINT\": \"<YOUR_VM_INSTANCE>\",\n        \"VM_INSTANCE_TYPE\": \"<YOUR_VM_INSTANCE_TYPE>\",\n        \"VM_INSTANCE_BEARER_TOKEN\": \"<YOUR_VM_BEARER_TOKEN>\"\n      }\n    }\n  }\n}\n```\n\nSee [Windsurf MCP docs](https://docs.windsurf.com/windsurf/mcp) for more info.\n\n### Using Docker instead of binary\n\nYou can run VictoriaMetrics MCP server using Docker instead of local binary.\n\nYou should replace run command in configuration examples above in the following way:\n\n```\n{\n  \"mcpServers\": {\n    \"victoriametrics\": {\n      \"command\": \"docker\",\n        \"args\": [\n          \"run\",\n          \"-i\", \"--rm\",\n          \"-e\", \"VM_INSTANCE_ENTRYPOINT\",\n          \"-e\", \"VM_INSTANCE_TYPE\",\n          \"-e\", \"VM_INSTANCE_BEARER_TOKEN\",\n          \"ghcr.io/victoriametrics-community/mcp-victoriametrics\",\n        ],\n      \"env\": {\n        \"VM_INSTANCE_ENTRYPOINT\": \"<YOUR_VM_INSTANCE>\",\n        \"VM_INSTANCE_TYPE\": \"<YOUR_VM_INSTANCE_TYPE>\",\n        \"VM_INSTANCE_BEARER_TOKEN\": \"<YOUR_VM_BEARER_TOKEN>\"\n      }\n    }\n  }\n}\n```\n\n## Usage\n\nAfter [installing](#installation) and [configuring](#setup-in-clients) the MCP server, you can start using it with your favorite MCP client.\n\nYou can start dialog with AI assistant from the phrase:\n\n```\nUse MCP VictoriaMetrics in the following answers\n```\n\nBut it's not required, you can just start asking questions and the assistant will automatically use the tools and documentation to provide you with the best answers.\nJust take a look into [Dialog example](#dialog-example) section for better understanding what you can do with it.\n\n### Toolset\n\nMCP VictoriaMetrics provides numerous tools for interacting with your VictoriaMetrics instance.\n\nHere's a list of common available tools:\n\n| Tool | Description                                               |\n|------|-----------------------------------------------------------|\n| `query` | Execute instant PromQL/MetricsQL queries                  |\n| `query_range` | Execute range PromQL/MetricsQL queries over a time period |\n| `metrics` | List available metrics                                    |\n| `labels` | List available label names                                |\n| `label_values` | List values for a specific label                          |\n| `series` | List available time series                                |\n| `export` | Export raw time series data to JSON or CSV                |\n| `rules` | View alerting and recording rules                         |\n| `alerts` | View current alerts (firing and pending)                  |\n| `flags` | View non-default flags of the VictoriaMetrics instance    |\n| `metric_statistics` | Get metrics usage (in queries) statistics                 |\n| `active_queries` | View currently executing queries                          |\n| `top_queries` | View most frequent or slowest queries                     |\n| `tsdb_status` | View TSDB cardinality statistics                          |\n| `tenants` | List available tenants in multi-tenant cluster setup      |\n| `documentation` | Search in embedded VictoriaMetrics documentation          |\n| `metric_relabel_debug` | Debug Prometheus-compatible relabeling rules              |\n| `downsampling_filters_debug` | Debug downsampling configuration                          |\n| `retention_filters_debug` | Debug retention filters configuration                     |\n| `prettify_query` | Prettify and format PromQL/MetricsQL queries              |\n| `explain_query` | Parse PromQL/MetricsQL queries and explain how it works   |\n| `test_rules` | Unit-test alerting and recording rules using vmalert tool |\n\nHere are some additional tools that are available for [VictoriaMetrics Cloud](https://docs.victoriametrics.com/victoriametrics-cloud/) (with specifying `VMC_API_KEY` parameter) users:\n\n| Tool              | Description                                                      |\n|-------------------|------------------------------------------------------------------|\n| `deployments`     | List available deployments in VictoriaMetrics Cloud              |\n| `cloud_providers` | List available cloud providers in VictoriaMetrics Cloud          |\n| `regions`         | List available cloud providers regions in VictoriaMetrics Cloud  |\n| `tiers`           | List available deployment tiers in VictoriaMetrics Cloud         |\n| `access_tokens`   | List available deployment access tokens in VictoriaMetrics Cloud |\n| `rule_filenames`  | List available alerting and recording rule filenames in VictoriaMetrics Cloud |\n| `rule_file`       | Content of a specific alerting or recording rule file in VictoriaMetrics Cloud |\n\n### Prompts\n\nThe server includes pre-defined prompts for common tasks.\n\nThese are just examples at the moment, the prompt library will be added to in the future:\n\n| Prompt | Description |\n|--------|-------------|\n| `unused_metrics` | Find metrics that are never queried and create relabel configs to stop ingesting them |\n| `documentation` | Search VictoriaMetrics documentation for specific topics |\n| `rarely_used_metrics_with_high_cardinality` | Identify high-cardinality metrics that are rarely queried |\n\n## Dialog example\n\nThis is just example of dialog with Assistant using MCP Server that can help to understand how it can work (but's it's real dialog with using the Victoria Metrics MCP server with Claude Desktop and configured to [public playground instance](https://play.victoriametrics.com)):\n\n- > **You**: What tenants are available in my VM?\n- > **Assistant** *In your VictoriaMetrics instance, the following tenants are available `0:0` (default tenant), `1:0`, `10:0`, `100:0`*\n- > **You**: From now on, please use only default tenant\n- > **Assistant**: *I understand. From now on, I'll use only the default tenant (0:0) for all operations with your VictoriaMetrics instance.*\n- > **You**: Which metrics do we have?\n- > **Assistant**: *There are many metrics available in your VictoriaMetrics instance. The list includes metrics from various systems and components, such as:*\n  >\n  > - *System metrics (`node_`, `machine_`, etc.),*\n  > - *Kubernetes metrics (`kube_`, `container_`, `apiserver_`, etc.),*\n  > - *VictoriaMetrics-specific metrics (`vm_`, `vmagent_`, `vmalert_`, etc.),*\n  > - *Go runtime metrics (`go_`),*\n  > - *Prometheus-related metrics (`scrape_`, `promhttp_`),*\n  > - *Various application metrics (`argocd_`, `alertmanager_`).*\n  >\n  > *This is a comprehensive list of over 2000 metrics that are available for querying. Is there a specific type of metric you're interested in exploring further?*\n- > **You**: Ok, let's work with kubernetes metrics from now on. Please show me which of these metrics never queried?\n- > **Assistant**: *Based on the results, I can see that there are two Kubernetes metrics that have never been queried (query count is 0):*\n  >\n  > - *`kube_persistentvolumeclaim_deletion_timestamp` - This metric provides information about when PersistentVolumeClaims were marked for deletion.*\n  > - *`kube_pod_init_container_status_last_terminated_reason` - This metric shows the reason why init containers in pods were last terminated.*\n  >\n  > *These metrics might be valuable for monitoring and troubleshooting purposes:*\n  >\n  > - *The PVC deletion timestamp metric could help track deletion patterns or identify stuck PVCs.*\n  > - *The init container termination reason metric could help identify common failure patterns in your initialization containers.*\n  >\n  > *Would you like me to explain more about what these metrics track or suggest some useful queries to start monitoring them?*\n- > **You**: Yes, please. And also, can you create relabeling rules to stop ingesting these metrics?\n- > **Assistant**: *I'll create a relabel configuration to exclude these never-queried metrics from collection. This will help reduce storage and processing overhead. Here's the relabel configuration you can add to your VictoriaMetrics scrape configuration:*\n  >\n  > ```yaml\n  > relabel_configs:\n  > - action: drop\n  >   source_labels: [__name__]\n  >   regex: kube_persistentvolumeclaim_deletion_timestamp|kube_pod_init_container_status_last_terminated_reason\n  > ```\n  >\n  > *This configuration will:*\n  > 1. *Look at each metric's name (the `__name__` label)*\n  > 2. *Check if it matches either of the specified metrics*\n  > 3. *Drop the metrics that match, preventing them from being collected and stored*\n  >\n  > *You can add this to your VictoriaMetrics configuration file or to the relevant scrape job configurations in your Prometheus configuration if you're using Prometheus as a scraper for VictoriaMetrics.*\n  > *If you want to test this relabel configuration before implementing it, you can use the metric relabel debug tool to see how it would affect your metrics.*\n- > **You**: Yes, please debug this relabel config on real time series to see how it would affect my metrics\n- > **Assistant**: *Perfect! The relabel config works as expected:*\n  >\n  > - *The first two test cases show that both `kube_persistentvolumeclaim_deletion_timestamp` and `kube_pod_init_container_status_last_terminated_reason` metrics are correctly dropped (resulting labels are empty `{}`).*\n  > - *The third test case confirms that other metrics like `kube_pod_status_phase` are preserved and not affected by our drop rule.*\n  >\n  > *You can confidently add this relabel configuration to your VictoriaMetrics or Prometheus configuration to stop collecting these unused metrics. This will save storage space and reduce processing overhead without affecting your current monitoring capabilities.*\n- > **You**: But i'm using vmagent resource of VictoriaMetrics operator, could you please give me part of specification for my agent with this relabel config?\n- > **Assistant**: *You're right, since you're using the VictoriaMetrics Operator and the VMAgent custom resource, the configuration needs to be in the appropriate format for that CR. Here's how you can add the relabel configuration to your VMAgent specification:*\n  >\n  > ```yaml\n  > apiVersion: operator.victoriametrics.com/v1beta1\n  > kind: VMAgent\n  > metadata:\n  > name: your-vmagent-name\n  > spec:\n  >   # ... your existing configuration ...\n  >   \n  >   # Add this section to configure global metric relabeling\n  >   inlineRelabelConfig:\n  >     - action: drop\n  >       sourceLabels: [\"__name__\"]\n  >       regex: kube_persistentvolumeclaim_deletion_timestamp|kube_pod_init_container_status_last_terminated_reason\n  >   \n  >   # ... rest of your configuration ...\n  > ```\n  >\n  > *Key points:*\n  >\n  > - *In the VMAgent spec, you use `inlineRelabelConfig` for inline relabeling rules*\n  > - *The field is called `sourceLabels` (not `source_labels` as in Prometheus config)*\n  > - *This is a global relabeling that will be applied to all metrics before they're stored*\n- > **You**: I decided not to remove those metrics, but just lower the sample rate for them using Downsampling. What downsampling parameters i have now?\n- > **Assistant**: *I can see that you currently have the following downsampling configuration:*\n  >\n  > ```\n  > -downsampling.period=\"7d:1m,30d:5m,180d:30m\"\n  > ```\n  >\n  > *This means:*\n  >\n  > - *Data newer than 7 days is kept at its original resolution*\n  > - *Data between 7-30 days old is downsampled to 1-minute resolution*\n  > - *Data between 30-180 days old is downsampled to 5-minute resolution*\n  > - *Data older than 180 days is downsampled to 30-minute resolution*\n  >\n  > *Now, if you want to add specific downsampling rules for those rarely-queried metrics, you can use the downsampling filters debug tool to test how new rules would work. Let's test a configuration where we apply more aggressive downsampling to those specific metrics:*\n  >\n  > *...getting series and using downsampling filter debugger...*\n  >\n  > *Great! Now our test is working correctly. Based on the current configuration and our testing, here's a suggested downsampling configuration for your VMAgent CR that would apply more aggressive downsampling to those rarely-queried metrics:*\n  >\n  > ```yaml\n  > apiVersion: operator.victoriametrics.com/v1beta1\n  > kind: VMCluster\n  > metadata:\n  >   name: monitoring-vm-cluster\n  > spec:\n  >   # ... your existing configuration ...\n  >   \n  >   # Update the vmstorage section with the new downsampling parameters\n  >   vmstorage:\n  >     extraArgs:\n  >       downsampling.period: '{__name__=\\\"kube_persistentvolumeclaim_deletion_timestamp\\\"}:1d:10m,{__name__=\\\"kube_pod_init_container_status_last_terminated_reason\\\"}:1d:10m,7d:1m,30d:5m,180d:30m'\n  >   \n  >   # ... rest of your configuration ...\n  > ``` \n  >\n  > *This configuration:*\n  >\n  > *- Applies 10-minute resolution downsampling for the rarely-queried metrics after just 1 day*\n  > *- Maintains your existing downsampling policy for all other metrics*\n  >\n  > *The order of the downsampling rules is important - more specific rules should be listed first.*\n\nDuring this dialog, the assistant was using the following tools:\n\n- `tenants` to get the list of available tenants\n- `documentation` to get information about functionality and data formats\n- `metrics` to get the list of available metrics\n- `metrics_staistics` to get the information about metrics usage\n- `series` to get the time series for debugging\n- `metric_relabel_debug` to debug relabeling rules\n- `flags` to get the information about instance parameters\n- `downsampling_filters_debug` to debug downsampling configuration\n\nBut you can use any other tools and combine them in your own way.\n\n## Monitoring\n\nIn [SSE and HTTP modes](#modes) the MCP Server provides metrics in Prometheus format (see [endpoints](#endpoints)) and you can find [in repo simple grafana dashboard](https://github.com/VictoriaMetrics-Community/mcp-victoriametrics/blob/main/dashboard/mcp-victoriametrics-grafana.json) for these metrics. \n\n## Roadmap\n\n- [x] Support \"Prettify query\" tool (done in [`v0.0.5`](https://github.com/VictoriaMetrics-Community/mcp-victoriametrics/releases/tag/v0.0.5))\n- [x] Support \"Explain query\" tool (done in [`v0.0.6`](https://github.com/VictoriaMetrics-Community/mcp-victoriametrics/releases/tag/v0.0.6))\n- [x] Support CI pipeline for building and pushing multiarch docker images (done in [`v1.0.0`](https://github.com/VictoriaMetrics-Community/mcp-victoriametrics/releases/tag/v1.0.0))\n- [ ] Support tool for analysis of [Query execution statistics](https://docs.victoriametrics.com/victoriametrics/query-stats/)\n- [ ] Support vmanomaly\n- [x] Support tool for [unit-testing of alerting and recording rules](https://docs.victoriametrics.com/victoriametrics/vmalert-tool/) (done in [`v0.0.7`](https://github.com/VictoriaMetrics-Community/mcp-victoriametrics/releases/tag/v0.0.7))\n- [x] Support optional integration with [VictoriaMetrics Cloud](https://victoriametrics.com/products/cloud/) (via [API keys](https://docs.victoriametrics.com/victoriametrics-cloud/api/)) (done in [`v0.0.9`](https://github.com/VictoriaMetrics-Community/mcp-victoriametrics/releases/tag/v0.0.9))\n- [ ] Add some extra knowledge to server in addition to current documentation tool:\n  - [x] [VictoriaMetrics blog](https://victoriametrics.com/blog/) posts (done in [`v1.1.0`](https://github.com/VictoriaMetrics-Community/mcp-victoriametrics/releases/tag/v1.1.0))\n  - [ ] Github issues\n  - [ ] Public slack chat history\n  - [ ] CRD schemas\n  - [ ] Alerting and recording rule sets\n- [ ] Implement multitenant version of MCP (that will support several deployments)\n- [ ] Add flags/configs validation tool\n- [ ] Support tools for vmagent API\n- [ ] Support [new vmalert API](https://github.com/VictoriaMetrics/VictoriaMetrics/pull/9046/files)\n- [x] Enabling/disabling tools via configuration (done in [`v0.0.8`](https://github.com/VictoriaMetrics-Community/mcp-victoriametrics/releases/tag/v0.0.8))\n- [ ] Tools for Alertmanager APIs [#6](https://github.com/VictoriaMetrics-Community/mcp-victoriametrics/issues/6)\n- [ ] Support for [metrics metadata](https://github.com/VictoriaMetrics/VictoriaMetrics/issues/2974) in case of implementation in VictoriaMetrics\n- [ ] Support authentication\n\n## Mentions\n\n[<img src=\"https://github.com/user-attachments/assets/76355b76-8a54-487d-a7d9-0b64886938fb\" alt=\"How to Use an AI Assistant with Your Monitoring System – VictoriaMetrics MCP Server\" width=\"520px\" />](https://www.youtube.com/watch?v=1k7xgbRi1k0)\n\n## Disclaimer\n\nAI services and agents along with MCP servers like this cannot guarantee the accuracy, completeness and reliability of results.\nYou should double check the results obtained with AI.\n\nThe quality of the MCP Server and its responses depends very much on the capabilities of your client and the quality of the model you are using.\n\n## Contributing\n\nContributions to the MCP VictoriaMetrics project are welcome! \n\nPlease feel free to submit issues, feature requests, or pull requests.\n",
  "category": "Monitoring",
  "quality_score": 70,
  "archestra_config": {
    "client_config_permutations": {
      "mcp-victoriametrics": {
        "command": "mcp-victoriametrics",
        "args": [],
        "env": {}
      },
      "mcp-victoriametrics-docker": {
        "command": "docker",
        "args": [
          "run",
          "-d",
          "--name",
          "mcp-victoriametrics",
          "-e",
          "MCP_SERVER_MODE=sse",
          "-e",
          "VM_INSTANCE_ENTRYPOINT=https://play.victoriametrics.com",
          "-e",
          "VM_INSTANCE_TYPE=cluster",
          "ghcr.io/victoriametrics-community/mcp-victoriametrics"
        ],
        "env": {
          "MCP_SERVER_MODE": "sse",
          "VM_INSTANCE_ENTRYPOINT": "https://play.victoriametrics.com",
          "VM_INSTANCE_TYPE": "cluster"
        }
      }
    },
    "oauth": {
      "provider": null,
      "required": false
    },
    "works_in_archestra": false
  },
  "github_info": {
    "owner": "VictoriaMetrics-Community",
    "repo": "mcp-victoriametrics",
    "url": "https://github.com/VictoriaMetrics-Community/mcp-victoriametrics",
    "name": "mcp-victoriametrics",
    "path": null,
    "stars": 57,
    "contributors": 6,
    "issues": 1,
    "releases": true,
    "ci_cd": true,
    "latest_commit_hash": "6330c1fd637367a8898bb39e887270092d5fcc7f"
  },
  "programming_language": "Go",
  "framework": null,
  "last_scraped_at": "2025-09-09T13:06:24.471Z",
  "evaluation_model": "gemini-2.5-flash",
  "protocol_features": {
    "implementing_tools": true,
    "implementing_prompts": true,
    "implementing_resources": true,
    "implementing_sampling": true,
    "implementing_roots": false,
    "implementing_logging": false,
    "implementing_stdio": true,
    "implementing_streamable_http": true,
    "implementing_oauth2": false
  },
  "dependencies": [
    {
      "name": "VictoriaMetrics/VictoriaMetrics",
      "importance": 9
    },
    {
      "name": "VictoriaMetrics/metrics",
      "importance": 8
    },
    {
      "name": "VictoriaMetrics/metricsql",
      "importance": 8
    },
    {
      "name": "VictoriaMetrics/victoriametrics-cloud-api-go",
      "importance": 8
    },
    {
      "name": "blevesearch/bleve/v2",
      "importance": 7
    },
    {
      "name": "mark3labs/mcp-go",
      "importance": 10
    },
    {
      "name": "tmc/langchaingo",
      "importance": 8
    },
    {
      "name": "gopkg.in/yaml.v2",
      "importance": 4
    }
  ],
  "raw_dependencies": "=== go.mod ===\nmodule github.com/VictoriaMetrics-Community/mcp-victoriametrics\n\ngo 1.24.5\n\nrequire (\n\tgithub.com/VictoriaMetrics/VictoriaMetrics v1.122.0\n\tgithub.com/VictoriaMetrics/metrics v1.38.0\n\tgithub.com/VictoriaMetrics/metricsql v0.84.6\n\tgithub.com/VictoriaMetrics/victoriametrics-cloud-api-go v0.0.2\n\tgithub.com/blevesearch/bleve/v2 v2.5.2\n\tgithub.com/mark3labs/mcp-go v0.35.0\n\tgithub.com/tmc/langchaingo v0.1.13\n\tgopkg.in/yaml.v2 v2.4.0\n)\n\nrequire (\n\tcloud.google.com/go/compute/metadata v0.7.0 // indirect\n\tgithub.com/RoaringBitmap/roaring/v2 v2.5.0 // indirect\n\tgithub.com/VictoriaMetrics/VictoriaLogs v0.0.0-20250714230749-82aca88cecd8 // indirect\n\tgithub.com/VictoriaMetrics/easyproto v0.1.4 // indirect\n\tgithub.com/VictoriaMetrics/fastcache v1.12.5 // indirect\n\tgithub.com/VividCortex/ewma v1.2.0 // indirect\n\tgithub.com/bits-and-blooms/bitset v1.22.0 // indirect\n\tgithub.com/blevesearch/bleve_index_api v1.2.8 // indirect\n\tgithub.com/blevesearch/geo v0.2.3 // indirect\n\tgithub.com/blevesearch/go-faiss v1.0.25 // indirect\n\tgithub.com/blevesearch/go-porterstemmer v1.0.3 // indirect\n\tgithub.com/blevesearch/gtreap v0.1.1 // indirect\n\tgithub.com/blevesearch/mmap-go v1.0.4 // indirect\n\tgithub.com/blevesearch/scorch_segment_api/v2 v2.3.10 // indirect\n\tgithub.com/blevesearch/segment v0.9.1 // indirect\n\tgithub.com/blevesearch/snowballstem v0.9.0 // indirect\n\tgithub.com/blevesearch/upsidedown_store_api v1.0.2 // indirect\n\tgithub.com/blevesearch/vellum v1.1.0 // indirect\n\tgithub.com/blevesearch/zapx/v11 v11.4.2 // indirect\n\tgithub.com/blevesearch/zapx/v12 v12.4.2 // indirect\n\tgithub.com/blevesearch/zapx/v13 v13.4.2 // indirect\n\tgithub.com/blevesearch/zapx/v14 v14.4.2 // indirect\n\tgithub.com/blevesearch/zapx/v15 v15.4.2 // indirect\n\tgithub.com/blevesearch/zapx/v16 v16.2.4 // indirect\n\tgithub.com/bmatcuk/doublestar/v4 v4.9.0 // indirect\n\tgithub.com/cespare/xxhash/v2 v2.3.0 // indirect\n\tgithub.com/cheggaaa/pb/v3 v3.1.7 // indirect\n\tgithub.com/dlclark/regexp2 v1.11.5 // indirect\n\tgithub.com/fatih/color v1.18.0 // indirect\n\tgithub.com/golang/protobuf v1.5.4 // indirect\n\tgithub.com/golang/snappy v1.0.0 // indirect\n\tgithub.com/google/uuid v1.6.0 // indirect\n\tgithub.com/json-iterator/go v1.1.12 // indirect\n\tgithub.com/klauspost/compress v1.18.0 // indirect\n\tgithub.com/mattn/go-colorable v0.1.14 // indirect\n\tgithub.com/mattn/go-isatty v0.0.20 // indirect\n\tgithub.com/mattn/go-runewidth v0.0.16 // indirect\n\tgithub.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd // indirect\n\tgithub.com/modern-go/reflect2 v1.0.2 // indirect\n\tgithub.com/mschoch/smat v0.2.0 // indirect\n\tgithub.com/pkoukk/tiktoken-go v0.1.7 // indirect\n\tgithub.com/rivo/uniseg v0.4.7 // indirect\n\tgithub.com/spf13/cast v1.9.2 // indirect\n\tgithub.com/valyala/bytebufferpool v1.0.0 // indirect\n\tgithub.com/valyala/fastjson v1.6.4 // indirect\n\tgithub.com/valyala/fastrand v1.1.0 // indirect\n\tgithub.com/valyala/fasttemplate v1.2.2 // indirect\n\tgithub.com/valyala/gozstd v1.22.0 // indirect\n\tgithub.com/valyala/histogram v1.2.0 // indirect\n\tgithub.com/valyala/quicktemplate v1.8.0 // indirect\n\tgithub.com/yosida95/uritemplate/v3 v3.0.2 // indirect\n\tgitlab.com/golang-commonmark/html v0.0.0-20191124015941-a22733972181 // indirect\n\tgitlab.com/golang-commonmark/linkify v0.0.0-20200225224916-64bca66f6ad3 // indirect\n\tgitlab.com/golang-commonmark/markdown v0.0.0-20211110145824-bf3e522c626a // indirect\n\tgitlab.com/golang-commonmark/mdurl v0.0.0-20191124015652-932350d1cb84 // indirect\n\tgitlab.com/golang-commonmark/puny v0.0.0-20191124015043-9f83538fa04f // indirect\n\tgo.etcd.io/bbolt v1.4.1 // indirect\n\tgo.yaml.in/yaml/v2 v2.4.2 // indirect\n\tgolang.org/x/net v0.42.0 // indirect\n\tgolang.org/x/oauth2 v0.30.0 // indirect\n\tgolang.org/x/sys v0.34.0 // indirect\n\tgolang.org/x/text v0.27.0 // indirect\n\tgoogle.golang.org/protobuf v1.36.6 // indirect\n)\n"
}
